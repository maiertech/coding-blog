---
title: Routing
description: Routing with Next.js.
tags:
  - nextjs
---

## `pages`

Next.js uses file-system based routing inside the `pages` directory. Pages map
to routes as you would expect.

You can also create a page for a dynamic route, e.g. `pages/posts/[id].js`:

- It needs to export async function `getStaticPaths`, which needs to return
  possible values for `id`.
- It also needs to export `getStaticProps({ params })` to fetch data for each
  route to be generated.

## `public`

Static assets go into directory `public`.

## Dynamic routes

Dynamic routes are also file system based. They use square bracket notation,
e.g. `/pages/posts/[id].js`. The default export in a dymanic route is the
component with which the route is rendered.

A dynamic route contains async function `getStaticProps`

```
export async function getStaticPaths() {
  // Return a list of possible values for id
  return {
    paths,
    fallback: false
  }
}
```

to retrieve all `id` values for which a page is generated. `paths` is an array
an array of objects with key `params` and then key `id`. This can also fetch
data from an external API. This runs at build time except during development,
where it runs on every request.

`fallback: false`: any path not generated at build time will result in a 404.
`fallback: true`: allows generating additional pages on demand. While a page is
generated, the fallback is served. Once the static build is complete, the
generated page will be served. Subsequent requests will receive the page. This
is static rendering on demand.

We still need a function that for each `id` retrieves the data required to
render the page:

```
export async function getStaticProps(context) {
  return {
    props: {}, // will be passed to the page component as props
  }
}
```
