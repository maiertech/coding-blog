---
title: File System Route API
description: Compare file system route API with gatsby-node.js.
tags:
  - gatsby
---

The
[File System Route API](https://www.gatsbyjs.com/docs/reference/routing/file-system-route-api/)
takes inspiration from
[Dynamic Routes in Next.js](https://nextjs.org/docs/routing/dynamic-routes). The
main difference is that the File System API retrieves data from Gatsby's GraphQL
layer, while with Dynamic Routes you have to write custom code to retrieve data
from any data source that can be tapped with JavaScript.

The
[Gatsby Node APIs](https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/)
used to be the only way to customize page generation inside `gatsby-node.js`.
You can think of this API as a collection of hooks with which you can hook into
Gatsby's build process to manipulate nodes of the GraphQL layer and page
generation.

I tend to create the following API functions in `gatsby-node.js`:

- [`onCreateNode`](https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/#onCreateNode)
  is called when a new node is created. You can use this API function to derive
  new nodes from existing nodes or to add fields to an existing node.
- [`createPages`](https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/#createPages)
  is called after the GraphQL layer is fully ready. You can query nodes and then
  create pages from the queried nodes.
- [`createSchemaCustomization`](https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/#createSchemaCustomization)
  is called to override Gatsby’s automatic schema inference. This is referred to
  as
  [schema customization](https://www.gatsbyjs.com/docs/reference/graphql-data-layer/schema-customization/).

A typical sequence for page generation looks like this:

1. Source nodes from various data sources.
1. Transform nodes and derive new nodes.
1. Generate pages from a subset of nodes.

Page generation involves two types of GraphQL queries:

1. A node selection query to select nodes from which pages should be generated
   (executed in `createPages`).
1. A page query exported from a template and run during page generation.

The File System Route API is an alterantive API to generate pages without having
to deal with a `gatsby-node.js` and the complex Gatsby Node APIs. You trade in
complexity and full control for a more opinonated but simpler approach that
covers many common scenarios, but not all.

Before we dive into the Files System Route API, let's recall that folder
`src/pages` has special routing powers. Any React component in this folder is
turned into a page, whose route corresponds to the file path.

## `{}` notation (collection routes)

The File System Route API allows you to place React components in `src/pages`
that have additional information encoded in their filename and/or pathname.

This component

```bash
src/pages/posts/{Post.title}.js
```

creates a page for each GraphQL `Post` node at route `/posts/<slugified-title>`,
i.e. the filename stem `{Post.title}` can be interpreted as node selection query
to select nodes from which to create pages (referred to as collection). Gatsby
creates the following query

```graphql
allPost {
  nodes {
    id
    title
  }
}
```

and generates a page for each `id` using the default export of file
`{Post.title}.js`, which also needs to export a page query that receives `id` as
query parameter.

## `[]` notation (client-only routes)

You can also use square bracket syntax, which is corresponds to dynamic routes
in Next.js. Square bracket notation results in client-side routes without any
pages being generated.

File

```bash
src/pages/users/[id].js
```

generates client-side route like `/users/:id`. A `params` object with and `id`
prop is passed into the default export React component in file `[id].js`.

You can use `[]` notation to create a fallback for a collection route, e.g. if
you have

```bash
src/pages/products/{Product.name}.js
```

and

```bash
src/pages/products/[name].js
```

the collection route takes precedence and for everything else the client-side
only routes are used.

## Catch all

You can use `[]` notation to create a catch all route and delegate all routes in
a subtree of your site to an app, e.g.

```bash
/src/pages/dashboard/[...].js
```

will handle all `/dashboard/*` routes. You can access the actual sub-route as
follows

```jsx
function App(props) {
  const splat = props.params[‘*’]
}
```

and pass it into the router that the app uses.
